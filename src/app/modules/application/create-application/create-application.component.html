<div class="p-4 modal-content">
    <div class="modal-header border-bottom-0 pb-0">
        <div class="fs-20px bold-fonts pb-0">
          {{title}}  Application
        </div>
    </div>
    <div class="modal-body">
        <form [formGroup]="applicationForm" (ngSubmit)="onSubmit()">
            <div class="mb-4 custom-input"
                [ngClass]="isControlHasError('applicationName','required')? 'custom-input-error': 'custom-input'">
                <label for="applicationName" class="mb-1 primary_color required fw-700 semi-bold-fonts">Name</label>
                <input type="text" class="form-control form-control-lg ps-3 ps-2 fs-14px"
                    formControlName="app_name" placeholder="Enter name">
                <small *ngIf="isControlHasError('applicationName','required')" class="mt-1 fs-14px text-danger">Domain
                    name is
                    required</small>
            </div>
            <div class="mb-4 custom-input">
                <label for="appUrl" class="mb-1 primary_color  fw-700 semi-bold-fonts">App URL</label>
                <p>Enter the endpoint where users will be sent after authentication. This URI must match the one registered with your application to ensure secure and correct redirection.</p>
                <input type="text" class="form-control form-control-lg ps-3 fs-14px" placeholder="Enter url"
                    formControlName="url">
                <!-- <span *ngIf="isControlHasError('domainName','required')" class="text-danger">Domain name is
                    required</span> -->
            </div>
            <label for="appUrl" class="mb-1 primary_color  fw-700 semi-bold-fonts">Redirect URL</label>
            <p>A unique identifier for your application. Use this ID to configure and authenticate your application with the service</p>
            <div formArrayName="redirectUri">
              <div *ngFor="let uri of redirectUriArray.controls; let i = index" class="d-flex align-items-center mb-2">
                <input
                  type="text"
                  class="form-control ps-3 fs-14px"
                  placeholder="Enter URI"
                  [formControlName]="i"
                  (input)="onUriInputChange(i)"
                />
                <span
                  *ngIf="uri.value && i === redirectUriArray.controls.length - 1 "
                  class="primary_button cursor-pointer plus_button ms-2"
                  (click)="addInputUri()"
                >&#x2B;</span>

                <span
                  *ngIf="uri.value && i !== redirectUriArray.controls.length - 1"
                  class="primary_button cursor-pointer delete_button ms-2"
                  (click)="removeInputUri(i)"
                >&#x2212;</span>
              </div>
            </div>

            <div class="mt-4 custom-dropdown"
            *ngIf="this.localStoreService.getUserRole().toLowerCase() === 'master' && this.title === 'edit'">
              <label for="exampleFormControlInput1" class="form-label mb-1 fs-14px fw-700 required">Organization</label>
              <ng-select class=""
                [ngClass]="{
                  'custom-select-error': isControlHasError('organization', 'required'),
                  'custom-select': !isControlHasError('organization', 'required')
                }"
                formControlName="organization" (focus)="isFocused = true" (blur)="isFocused = false" (change)="onChange()"
                placeholder="Select organization">
                <ng-option *ngFor="let organization of organization" [value]="organization.id">{{ organization.name }}</ng-option>
              </ng-select>
              <small *ngIf="isControlHasError('organization', 'required')" class="mt-1 fs-14px text-danger">organization is required</small>
            </div>

            <ng-container *ngIf="inputUris.length <= 5">
            <ng-container *ngFor="let item of inputUris">
                <div class="mb-4 custom-input">
                    <!-- <label for="url" class="mb-1 primary_color  fw-700 semi-bold-fonts">Url</label> -->
                    <p class="fs-14px color-8492A6 mb-0 ">A unique identifier for your application. Use this ID to configure and authenticate your application with the service.</p>
                    <div class="d-flex">
                        <input [(ngModel)]="item.value" type="text" class="form-control  ps-3 fs-14px" placeholder="Enter URI"
                            formControlName="url">
                    </div>
                </div>
            </ng-container>
        </ng-container>

        <div class="modal-footer border-top-0 pb-0 pe-0">
          <button type="button" class="cancel_btn" (click)="closeModal()">Cancel</button>
          <button type="submit" class="primary_button" [disabled]="isLoading">
              <span class="spinner-border spinner-border-sm" *ngIf="isLoading"></span>
              <span *ngIf="title === 'Create'">
                  Create
              </span>
              <span *ngIf="title === 'Edit'">
                  Update
              </span>
          </button>
      </div>
        </form>
    </div>
</div>
