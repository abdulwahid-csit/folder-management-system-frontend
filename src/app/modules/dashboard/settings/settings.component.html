<div class="wrapper">
  <div class="main-div w-100 organization-details-div bg-white  p-3 ps-4 custom-shadow"
    *ngIf="this.localStoreService.getUserRole().toLowerCase() !== 'master'">
    <div class="d-flex">
      <div class="iis-logo">
        <img src="../../../../../assets/images/iis.svg" alt="iis">
      </div>
      <div class="ms-3">
        <div class="fs-20px fw-700 color-16192C bold-fonts">
          Digital Solutions
        </div>
        <div class="d-flex mt-1">
          <div class="d-flex">
            <div>
              <img src="../../../../../assets/icons/Frame.svg" alt="">
            </div>
            <div class="ms-1">
              <span class="color-8492A6 fs-14px semi-bold-fonts">4ii Solutions</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="main-div w-100 organization-details-div bg-white  p-3 ps-4 custom-shadow"
    *ngIf="this.localStoreService.getUserRole().toLowerCase() === 'master'">
    <div class="d-flex">
      <div class="iis-logo">
        <img class="rounded" [src]="localStoreService.getUserProfile()" height="64px" alt="iis">
      </div>
      <div class="ms-3">
        <div class="fs-20px fw-700 color-16192C bold-fonts">
          {{localStoreService.getUserName()}}
        </div>
        <div class="d-flex mt-1">
          <div class="d-flex">
            <div>
              <img src="../../../../../assets/icons/Frame.svg" alt="">
            </div>
            <div class="ms-1">
              <span class="color-8492A6 fs-14px semi-bold-fonts">{{localStoreService.getUserEmail()}}</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>


  <div class="col-8 mt-4 w-100">
    <div class="d-flex justify-content-start">
      <nav class="mb-3 nav-tabs">
        <div class="nav nav-tabs fs-14px fw-600 semi-bold-fonts" id="nav-tab" role="tablist">
          <button (click)="setSelectedTab('account')" class="nav-link border-top-0 border-start-0 border-end-0"
            [ngClass]="'active-nav-tab'" [ngClass]="{'active-nav-tab': selectedTab === 'account'}" id="nav-account-tab"
            data-bs-toggle="tab" data-bs-target="#nav-account" type="button" role="tab" aria-controls="nav-account"
            [attr.aria-selected]="selectedTab === 'account'">
            Account
          </button>
          <button *ngIf="this.localStoreService.getUserRole().toLowerCase() === 'owner'"
            (click)="setSelectedTab('organization')" class="nav-link border-top-0 border-start-0 border-end-0"
            [ngClass]="{'active-nav-tab': selectedTab === 'organization'}" id="nav-organization-tab"
            data-bs-toggle="tab" data-bs-target="#nav-organization" type="button" role="tab"
            aria-controls="nav-organization" [attr.aria-selected]="selectedTab === 'organization'">
            Organization
          </button>
          <button (click)="setSelectedTab('security')" class="nav-link border-top-0 border-start-0 border-end-0"
            [ngClass]="{'active-nav-tab': selectedTab === 'security'}" id="nav-monthly-tab" data-bs-toggle="tab"
            data-bs-target="#nav-monthly" type="button" role="tab" aria-controls="nav-monthly"
            [attr.aria-selected]="selectedTab === 'security'">
            Security
          </button>
        </div>
      </nav>
    </div>
    <hr class="line">
  </div>


  <div class="tabs-div bg-white custom-shadow">
    <div id="features-tab" *ngIf="selectedTab === 'account'">
      <div class="main-div w-100  account-tab">
        <div>
          <div class="main-div">
            <h4 class="fs-20px fw-700 mb-3">Account Details</h4>
            <form [formGroup]="accountDetailsForm" (ngSubmit)="onAccountDetailsSubmit()" class="">
              <div class="d-flex justify-content-between">
                <div class="mb-4 custom-input w-50 me-4 position-relative"
                  [ngClass]="isControlHasError('firstName', 'required', accountDetailsForm) ? 'custom-input-error': 'custom-input'">
                  <label for="exampleFormControlInput1" class="form-label mb-1 fs-14px fw-700 required">First Name
                  </label>
                  <input type="text" class="form-control fs-14px" id="exampleFormControlInput1"
                    placeholder="Enter first name" formControlName="firstName">
                  <div class="error-message">
                    <small *ngIf="isControlHasError('firstName','required', accountDetailsForm)"
                      class="mt-1 text-danger">First
                      Name is
                      required</small>
                  </div>
                </div>
                <div class="mb-4 custom-input w-50 position-relative"
                  [ngClass]="isControlHasError('lastName', 'required', accountDetailsForm) ? 'custom-input-error': 'custom-input'">
                  <label for="exampleFormControlInput1" class="form-label mb-1 fs-14px fw-700 required ">Last Name
                  </label>
                  <input type="text" class="form-control fs-14px" id="exampleFormControlInput1"
                    placeholder="Enter last name" formControlName="lastName">
                  <small *ngIf="isControlHasError('lastName','required', accountDetailsForm)"
                    class="mt-1 text-danger">Last
                    Name is
                    required</small>
                </div>

              </div>
              <div class="d-flex justify-content-between position-relative">
                <div class="mb-4 custom-input w-50 me-4 position-relative"
                  [ngClass]="isControlHasError('username', 'required', accountDetailsForm) ? 'custom-input-error': 'custom-input'">
                  <label for="exampleFormControlInput1" class="form-label mb-1 fs-14px fw-700 required">User Name
                  </label>
                  <input type="text" class="form-control fs-14px" id="exampleFormControlInput1"
                    placeholder="Enter username" formControlName="username">
                  <small *ngIf="isControlHasError('username','required', accountDetailsForm)"
                    class=" mt-1 text-danger">First
                    Name is
                    required</small>
                </div>
                <div class="mb-4 custom-input w-50 position-relative"
                  [ngClass]="isControlHasError('phoneNumber', 'required', accountDetailsForm) ? 'custom-input-error': 'custom-input'">
                  <label for="exampleFormControlInput1" class="form-label mb-1 fs-14px fw-700 required">Phone Number
                  </label>
                  <input type="text" class="form-control fs-14px" id="exampleFormControlInput1"
                    placeholder="Enter phone number" formControlName="phoneNumber" maxLength="11">
                  <small *ngIf="isControlHasError('phoneNumber','required', accountDetailsForm)"
                    class="mt-1 text-danger">First Name is
                    required</small>
                </div>

              </div>
              <div class="d-flex justify-content-between">
                <div class="mb-4 w-50 me-4 disabled-input">
                  <label for="exampleFormControlInput1" class="form-label mb-1 fs-14px fw-700 required">Email </label>
                  <input type="text" class="form-control fs-14px pointer-none" id="exampleFormControlInput1"
                    placeholder="" formControlName="email" [readOnly]="true">
                  <!-- <small *ngIf="isControlHasError('email','required', accountDetailsForm)" class="text-danger">First
                    Name is
                    required</small> -->
                </div>
                <div class="mb-4 w-50 disabled-input">
                  <label for="exampleFormControlInput1" class="form-label mb-1 fs-14px fw-700 required">Role
                  </label>
                  <input type="text" class="form-control fs-14px disabled pointer-none" id="exampleFormControlInput1"
                    placeholder="Enter role" formControlName="role" [readOnly]="true">
                  <!-- <small *ngIf="isControlHasError('role','required', accountDetailsForm)" class="text-danger">First Name
                    is
                    required</small> -->
                </div>

              </div>
              <div class="d-flex justify-content-end mt-4">
                <!-- <button type="button" class="btn border me-3 close-modal" (click)="closeModal()">Cancel</button> -->
                <button type="submit" class="primary_button" [disabled]="isLoadingAccount">
                  <span class="spinner-border spinner-border-sm" *ngIf="isLoadingAccount"></span>
                  Save
                </button>

              </div>
            </form>
          </div>
        </div>
      </div>
    </div>

    <div id="security-tab" *ngIf="selectedTab === 'security'">
      <div class="main-div w-100 securitys-tab">

        <div class="main-div">
          <h4 class="fs-20px fw-700 mb-3">Security</h4>
          <form [formGroup]="changePasswordForm" (ngSubmit)="onChangePasswordSubmit()" class="">
            <div class="d-flex justify-content-between">
              <div class="mb-4 custom-input w-50 me-4 position-relative"
                [ngClass]="isControlHasError('password', 'required', changePasswordForm) ? 'custom-input-error': 'custom-input'">
                <label for="exampleFormControlInput1" class="form-label mb-1 fs-14px fw-700 required">Current Password
                </label>
                <input type="password" class="form-control fs-14px" id="exampleFormControlInput1"
                  placeholder="Enter current password" formControlName="password">
                <small *ngIf="isControlHasError('password','required', changePasswordForm)"
                  class="mt-1 text-danger">Current password is required</small>
              </div>
              <div class="mb-4 custom-input w-50 me-4 position-relative"></div>
            </div>
            <div class="d-flex justify-content-between">
              <div class="mb-4 custom-input w-50 position-relative"
                [ngClass]="(isControlHasError('newPassword', 'required', changePasswordForm) || matchPassword) ? 'custom-input-error': 'custom-input'">
                <label for="exampleFormCont" class="form-label mb-1 fs-14px fw-700 required ">New Password
                </label>
                <input type="password" class="form-control fs-14px" id="exampleFormCont"
                  placeholder="Enter new password" formControlName="newPassword">
                <small *ngIf="isControlHasError('newPassword','required', changePasswordForm)"
                  class="mt-1 text-danger">New
                  password</small>
                <small *ngIf="matchPassword" class="mt-1 text-danger">Password not matched</small>
              </div>
              <div class="custom-input position-relative"></div>
              <div class="mb-4 custom-input w-50 me-4 ms-4 pointer-none position-relative"
                [ngClass]="(isControlHasError('confirmPassword', 'required', changePasswordForm) || matchPassword) ? 'custom-input-error': 'custom-input'">
                <label for="exampleFormControlInput1" class="form-label mb-1 fs-14px fw-700 required">Confirm New
                  Password
                </label>
                <input type="password" class="form-control fs-14px" id="exampleFormControlInput1"
                  placeholder="Retype new password" formControlName="confirmPassword">
                <small *ngIf="isControlHasError('confirmPassword','required', changePasswordForm)"
                  class="mt-1 text-danger">Please confirm new password</small>
                <small *ngIf="matchPassword" class="mt-1 text-danger">Password not matched</small>
              </div>
            </div>
            <div class="d-flex justify-content-end mt-4">
              <!-- <button type="button" class="btn border me-3 close-modal" (click)="closeModal()">Cancel</button> -->
              <button type="submit" class="primary_button" [disabled]="isLoadingPassword">
                <span class="spinner-border spinner-border-sm" *ngIf="isLoadingPassword"></span>
                Change Password
              </button>
            </div>

          </form>
        </div>
      </div>
    </div>

    <div id="security-tab" *ngIf="selectedTab === 'organization'">
      <div class="main-div w-100 organization-tab">
        <div class="main-div mt-1">
          <h4 class="fs-20px fw-700 mb-3">Organization Detail</h4>
          <form [formGroup]="changePasswordForm" (ngSubmit)="onChangePasswordSubmit()" class="">
            <div class="d-flex justify-content-between">
              <div class="mb-3 custom-input w-50 me-4">
                <label for="exampleFormControlInput1" class="form-label mb-1 fs-14px fw-700">Name
                </label>
                <input type="text" class="form-control fs-14px" placeholder="Enter Organization name"
                  formControlName="name">

              </div>
              <div class="mb-3 custom-input w-50">
                <label for="exampleFormControlInput1" class="form-label mb-1 fs-14px fw-700 ">Domain
                </label>
                <input type="text" class="form-control fs-14px" placeholder="Enter domain name"
                  formControlName="lastName">

              </div>

            </div>
            <div class="d-flex justify-content-end mt-4">
              <button type="submit" class="primary_button">Save</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>